(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[496],{5125:function(e,t,r){Promise.resolve().then(r.bind(r,8799))},8799:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return WardrobePage}});var a=r(7437),l=r(4033),n=r(2265);let o="authToken";function WardrobePage(){let e=(0,l.useRouter)(),[t,r]=(0,n.useState)([]),[s,i]=(0,n.useState)(""),c=(0,n.useRef)(null),d=(0,n.useRef)(null);(0,n.useEffect)(()=>{let t=localStorage.getItem(o);if(!t){e.replace("/login");return}let a=localStorage.getItem("wardrobe_".concat(t));if(a)try{let e=JSON.parse(a);r(e)}catch(e){}},[e]);let handleFileChange=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let l=new Image;l.onload=()=>{let{width:e,height:t}=l;e>t?e>1024&&(t*=1024/e,e=1024):t>1024&&(e*=1024/t,t=1024);let a=document.createElement("canvas");a.width=e,a.height=t;let n=a.getContext("2d");if(!n){i("Failed to process image.");return}n.drawImage(l,0,0,e,t);let s=a.toDataURL("image/jpeg",.8);r(e=>{let t=[...e,s];try{let e=localStorage.getItem(o);return e&&localStorage.setItem("wardrobe_".concat(e),JSON.stringify(t)),i("Item added and saved!"),setTimeout(()=>{i("")},2e3),t}catch(t){return i("Image too large to save on this device. Please try a smaller photo."),e}})},l.onerror=()=>{i("Failed to process image.")};let n=new FileReader;n.onload=()=>{l.src=n.result},n.readAsDataURL(a),e.target.value=""};return(0,a.jsxs)("main",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Wardrobe"}),(0,a.jsx)("button",{onClick:()=>{try{localStorage.removeItem(o)}catch(e){}e.replace("/login")},className:"px-4 py-2 bg-red-500 text-white rounded",children:"Logout"})]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},className:"px-4 py-2 rounded bg-blue-600 text-white",children:"Take Photo"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},className:"px-4 py-2 rounded bg-gray-600 text-white",children:"Choose from Library"})]}),(0,a.jsxs)("div",{"aria-hidden":"true",style:{display:"none"},children:[(0,a.jsx)("input",{ref:c,type:"file",accept:"image/*",capture:"environment",onChange:handleFileChange}),(0,a.jsx)("input",{ref:d,type:"file",accept:"image/*",onChange:handleFileChange})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-4",children:t.map((e,t)=>(0,a.jsx)("div",{className:"w-full aspect-square overflow-hidden rounded",children:(0,a.jsx)("img",{src:e,alt:"Item ".concat(t),className:"w-full h-full object-cover"})},t))})]})}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=r(2265),l=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var a,i={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,a)&&!s.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:l,type:e,key:c,ref:d,props:i,_owner:o.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=5125)}),_N_E=e.O()}]);