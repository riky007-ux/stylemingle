(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[496],{5125:function(e,t,r){Promise.resolve().then(r.bind(r,8799))},8799:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return WardrobePage}});var a=r(7437),n=r(2265);let o="authToken";function WardrobePage(){let[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),fetchItems=async()=>{let e=localStorage.getItem(o);if(!e){t([]),s(!1);return}try{let r=await fetch("/api/wardrobe/items",{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json(),a=Array.isArray(e)?e:e.items||[];t(a)}else t([])}catch(e){console.error(e),t([])}finally{s(!1)}};(0,n.useEffect)(()=>{fetchItems()},[]);let handleUpload=async e=>{let t=localStorage.getItem(o);if(t&&e)try{await fetch("/api/wardrobe/upload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({imageUrl:e})}),fetchItems()}catch(e){console.error(e)}},handleFileInput=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=e.target.files[0],r=URL.createObjectURL(t);await handleUpload(r)};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-4",children:"My Wardrobe"}),r?(0,a.jsx)("p",{children:"Loading..."}):0===e.length?(0,a.jsx)("p",{children:"No items yet."}):(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.map(e=>(0,a.jsx)("div",{className:"border p-2",children:(0,a.jsx)("img",{src:e.imageUrl,alt:"Wardrobe item",className:"w-full h-auto"})},e.id))}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:handleFileInput,className:"mb-2"})})]})}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=r(2265),n=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var a,l={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,a)&&!i.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:n,type:e,key:c,ref:d,props:l,_owner:s.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=5125)}),_N_E=e.O()}]);